
[#Harvester-Rancher]

== Use {harvester} and {rancher} together

IMPORTANT: If not done already, make sure the desired {harvester} installation is compatible with the {rancher}:
https://docs.harvesterhci.io/v1.0/rancher/rancher-integration#rancher--harvester-support-matrix

=== How to connect {harvester} with {rancher}

To connect {harvester} with {rancher} the first step is to access the Rancher.
The menu in the upper left corner allows to open the Virtualization Management tab.

image::Rancher-Virtualization-Management.png[title=Rancher Virtualization Management,scaledwidth=99%]

The only option here, should be the Import Existing button, which needs to be clicked.

image::Rancher-Create-{harvester}-Cluster.png[title=Create {harvester} Cluster,scaledwidth=99%]

In the next screen, a name for the {harvester} cluster needs to be entered.

image::Rancher-Pending-{harvester}-Cluster.png[title=Create {harvester} Cluster,scaledwidth=99%]

After clicking the Create button, 3 steps to be executed on the {harvester} cluster are shown.



=== Provision virtual machines with RKE2

After {rancher} and {harvester} are connected, virtual machines can be provisioned using {rancher}.
To do so, access {rancher} and click "Create" in the home tab. Select the option "Harvester" and make sure,
that RKE2/K3s is selected.

Afterwards the "Cluster: Create Harvester" page is loaded.

// TODO picture of "Cluster: Create Harvester"

First step there is to set the cluster name.
The "Machine Pools" section specifies the number of machines to be provisioned, their Kubernetes role and further VM specific parameters.

The "Cluster Configuration" section allows to set some Kubernetes specific parameters.
Here the Kubernetes version should be selected to fulfill the requirements of the desired workload.