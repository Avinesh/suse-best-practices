[#Harvester-Installation]

== Installation of SUSE Rancher Harvester

=== Introduction

Harvester is the opensource Hyper Converged Infrastructure (HCI) solution running on Kubernetes, Longhorn and Kubevirt.
Harvester provides the ability to provision, manage and run virtual machines. 

=== Prerequistites

Depending on the purpose of the Harvester installation (development, testing or productive use) one or more (virtual) machines are needed.
Systemarchitecture is x86_64 only by the time of this writing.
For the Harvester deployment the following informations should be handy:


* IP addresses for the hosts running Harvester
* IP address to be used as management address
* Gateway address
* IP address of name server
* access to a timeserver
* access to the internet ( for airgapped installations see: ) /* FIXME link */

For more information see the product documentation for Harvester:
https://docs.harvesterhci.io/v1.1/


=== Preparations

Before the installation of Harvester can be started the following steps should be done:

* Download installation media as needed https://github.com/harvester/harvester/releases
* Prepare hardware to run the Harvester install on, e.g. mount the iso file.
* network setup (ip addresses, vlans)


=== Installation

The installation of Harvester is straight forward:

* Boot the machines dedicated to Harvester from the install media.
* After booting a guided setup leads through the installation.

image::002-Harvester-Install-1.png[title=Choose Installation Mode,400,200]

* Information of 
** device where the installation is targeted to

image::003-Harvester-Installation-2.png[title=Installation target, 400, 200]

** hostname
** IP address 
** network interface to be used 
** gateway 

image::004-Harvester-Installation-3.png[title=Network configuration, 400, 200]

** DNS servers

image::005-Harvester-Installation-4.png[title=DNS configuration, 400,200]

** Management IP address

image::006-Harvester-Installation-5.png[title=Configure Management IP address,400,200]

** define clustertoken

image::007-Harvester-Installation-6.png[title=Define clustertoken, 400, 200]

** Set the node shell access password

image::008-Harvester-Installation-7.png[title=Set password for node access,400,200]

** Configure timeserver

image::009-Harvester-Installation-8.png[title=Timehost configuration,400,200]


** proxy servers (optional) 

are being entered.

After entering the required information, a review panel is shown. Confirm and the installation will start.

image::010-Harvester-Installation-9.png[title=Review installation settings,400,200]

//Pictures


As soon as the install has finished successfully the following screen will be shown

image::012-Harvester-Installation-11.png[title=Installation finished,400,200]

=== Accessing the management UI

The Harvester HCI is managed via a web ui:

* use the management (VIP) address to access the Harvester UI via a internet browser.
//Picture
* Next is setting up the administrative account for Harvester
// Picture
* Now the Harvester Cluster overview dashboard is shown.
// Picture

// /* ==== Creation of network settings

//==== Import OS images for VMs

//From the main menu  choose Images, then click on the create button.
//The image needs to have a name and an optional description
//There two ways  to import an OS image, either by download from an internet source or by uploading a file from local computer.
//Finally click the save button.
//The image will be stored for later use in Harvester.

//==== Create VM

//Virtual machines are created by selecting the virtual machine item from menu list and clicking create.

//* Give a unique name to the VM 
//* select the cpu count
//* select the size of RAM
//* define the disk size and number of disks
//* select network and access method (masquerade or bridged, this depends on the Harvester network configuration)

//Start VM deployment by clicking the save button.
//*/
