[[Implementation_Phases]]
== Implementation Phases



.Implentation Phases with milestones of an deployment
image::Implementation_Phases.png[align="center",width=500]

=== Start & Design

Start your cloud project with a design workshop where all central 
questions are discussed and answered. Many of the questions
mentioned in chapter 1 must be clarified at the outset. If they 
are not answered properly, the entire project might be at risk.

A workshop with SUSE experts takes 2-3 days and preferably takes place
at the customer's site. The list of participants should include experts
and architects from all departments involved in the operation and 
maintenance of your future cloud environment, to ensure proper know-how
is taken in consideration for the design. This includes members from the 
datacenter operations, network operations and storage teams, and from any 
application team that will likely run software in the cloud.

The most important aspects to be discussed during the design workshop are:

- Specific business drivers -- Why is the customer
  looking into building a cloud and what challenge does he want to tackle?

- Use cases for the cloud -- What workloads will be running in the cloud 
  environment and what is the best technical implementation for them?

- Implementation -- How many environments are required? Is one environment 
  enough, or are different environments needes, such as a production, 
  staging, QA, development or test and trial environment?
 
- Expectations -- What are the expectations with regard to the performance 
  of the cloud in terms of capacity, bandwidth, latency?

- General conditions -- Are there any specific in-house regulations in place 
  that impact the implementation of a cloud? What are the physical conditions?

- Responsibilities -- Who drives the project at both ends? Who are the experts
  in charge, who communicates to whom during the implementation? Are there any 
  forseeable bottlenecks or issues?

==== Environment Types

One important question to clarify is how many OpenStack cloud environments  
a customer needs and what purpose these will be serving. A production setup 
must meet requirements different from a QA or development environment. 

Environments tailored for the purpose of development are used to:

- test new software functionality
- test configuration changes
- test patches
- test temporary product fixes (PTF)
- test upgrade procedures
- troubleshoot an issue
- training and sandbox purposes

In contrast to a production environment, a development environment only 
requires the basic OpenStack services and is easier to setup and maintain. 
It is also less complex and better to adapt.

A QA environment, however, with the purpose to test changes before merging 
them into the production platform, must be as close to the production 
environment as possible. Thus it has the same level of complexity and 
the same operation constraints.

==== The Design Workshop

The design of the solution is the most challenging part. In previous
chapters, the sizing (number of servers), failure domains and clusters, 
networking functionality and key aspects of the SUSE OpenStack Cloud and 
SUSE Enterprise Storage products have been discussed. During the design 
phase of the setup, all these factors are put into relation of the results 
of the workshop conducted in the first step to create a full picture of how 
the future cloud environment will look like.

In cooperation with the customer, the consultants will draft a design 
document for the setup and take all mentioned factors into consideration. 
They will demonstrate how SUSE products such as SUSE Enterprise Linux, SUSE 
OpenStack Cloud, SUSE Enterprise Storage, SUSE Manager, and others help
you to build a cloud fast and effectively. The design document contains all 
relevant information including:

- Which OpenStack services will be used -- What components in addition to
  the basic components are available and are useful in the environment? 
  What about additions such as OpenStack Monasca?

- How does the design of the network for the cloud look like -- What SDN 
  solution is used? What are the local requirements? How does the physical
  layout of the network look like? What is the target size and can the 
  network handle that size; if not, how does it need to be changed? Are there
  any possible showstoppers included in the design such as firewalls? How 
  does the cloud integrate into the existing structure for (external) networking?

- What network services are required and how will they be rolled out in
  the future cloud -- What protocols must be supported? Examples include
  DNS, DHCP, TFTP, PXE and many more.

- How is encryption inside the cloud handled -- When is communication with the 
  outside handled? Who can organize possibly required certificates for SSL-based 
  connections?

- What does the operations concept looks like and what tools will be used to
  implement the concept -- Is SUSE Manager used? How are patches handled?

- What licenses and external products must be acquired -- Who is in charge
  of acquiring those and until when does it happen?

- How experienced is the staff with regard to cloud computing and the
  economy of scale in general -- Is the staff experienced in operating an
  OpenStack cloud environment in particular? Is training necessary?

WARNING: Moving to the cloud is an organizational change. Staffing
is a critical component of a successful cloud deployment. Ensure your staff
is technically and mentally trained and prepared for this new environment.

==== CPU and RAM Ratio

During the workshop, a document will be created formally defining the
type and the amount of hardware that needs to be acquired. Of course,
our consultants will make sure to keep the explanations given in the
<<CPU_and_RAM_Ratio>> paragraph in mind -- sizing the hardware correctly
before ordering it eliminates a number of problems that would otherwise
be waiting for you further down the road.

==== Persistent vs. Ephemeral Storage Sizing Rules

Once again, the difference between Persistent and Ephemeral storage is
also important in the context of dimensioning the hardware. If you need a
reminder on why ephemeral storage is tricky, please have another look at
<<Ephemeral_and_Persistent_Storage>> and <<Ephemeral_Issues>> in chapters
2 and 5.

One way or another, the sizing for ephemeral storage and persistent
storage (i.e. the storage available in your Ceph cluster) needs to be
determined. It's important to not mix up ephemeral disks and persistent
block storage in this context. In addition to ephemeral disk, which is
automatically provided for almost every started VM anyway, storage for
Ceph or any other storage solution must be inclued in the planning.

To calculate the minimum disk space needed on a compute node, you need
to determine the highest disk-space-to-RAM ratio from your flavors. For
example:

- Flavor small: 2 GB RAM, 100 GB ephemeral disk => 50 GB disk / 1 GB RAM
- Flavor large: 8 GB RAM, 200 GB ephemeral disk => 25 GB disk / 1 GB RAM

So, 50 GB disk / 1 GB RAM is the ratio that matters. If you multiply that
value by the amount of RAM in gigabytes available on a compute node, you
have the minimum disk space required by ephemeral disks. Pad that value
with sufficient space for the root disks plus a buffer to leave some space
for flavors with a higher disk-space-to-RAM ratio in the future.

After the number of servers (cf. <<ReferenceArchitecture>>) becomes known,
it is also easy to calculate the required network ports and design the
network switch layout.

==== Compatibility with SUSE Linux Enterprise

Last but not least will our consultants during the workshop of course also
ensure that the hardware ending up on the List of Material is compatible
with SUSE Linux Enterprise, which is the fundament of SUSE OpenStack Cloud
and SUSE Enterprise Storage.

Further details on this can also be found online in the SUSE deployment
guide (see section 2.4 Hardware Requirements) and at
https://www.suse.com/documentation/suse-openstack-cloud-7/book_cloud_deploy/data/sec_depl_poc_matrix.html

=== List / Bill Of Material

Based on the outcome of the work done in the workshop, a list of required
hardware and software components and professional services is available
and quotes from vendors are requested. Once these come in, a price tag can
be applied to the solution and the total cost for setting the platform up
become known.

At this stage of the project, management approval is usually required to
determine whether the project will be pursued further or not. It may
also be possible to re-architect parts of the setup to decrease its
price at the cost of having less functionality or less capacity in the
setup.

=== Hardware Setup

If the project gets formal management approval, the acquisition of all
required components is the next logical step. When hardware, software
and professional services are delivered, the assembly of the cloud is to
commence.

Customers that have decided to go with SUSE will, at this stage of the
project, receive a short technical document by SUSE on how to prepare
the individual nodes of the setup to ensure a smooth installation of the
SUSE OpenStack Cloud and SUSE Enterprise Storage components as well as
any other possibly required component such as Autoyast for the automated
deployment of pysical servers.

The technical document will also contain relevant information for people
from other departments such as datacenter operations or network
operations.

Servers will then be installed physically in the datacenter and also get
an operating system.

=== Deployment

Using the determined solution for the roll-out of the cloud, the rollout
will be done in accordance with the governing factors laid out in the
Scope of Work definition created together during the Design Workshop. At
this stage of the project, SUSE architects will usually support you
(even on-site) to ensure a quick and good progress of the installation
of your future setup. We will especially make sure to perform the setup
in the right order so that our mighty deployment tools such as Autoyast
are functional from the get-go and the time required for the deployment
of your cloud is as small as possible.

=== Handover

Once all components are rolled out as desired, formal tests will be done
based on a catalogue of standard tests previously agreed on (SUSE has a
large number of acceptance tests to chose from). If all chosen tests are
completed successfully, a formal handover of the new setup is done and
the responsibility for the installation is tranferred to the customer.

Depending on the level of suppourt that you have acquired together with
the solution, you are, of course, even after this point free to ask for
support or ask any questions that you may have or that arise throughout
the process.

=== Production

After possibly required additional tests on your side, the setup goes
into production mode and start to actively serve customers.

=== Summary

If your goal is to build a large scale cloud environment, there are a
few factors to success you ought to take into consideration. These are,
amongst others,

- *Rely on Open Standards*: Avoid getting locked-in to a certain vendor
  -- both targets are achieved when using Open Source Software.

- *Automate*: Anything in cloud setups that can be automated must be
  automated to allow your smart staff to work on cool new features and
  help improve the environment.

- *Scale out -- but do it!*: The ability to scale out is an absolute key
  requirement and must be present -- but providers also most scale out
  when it is necessary to remain competitive (some companies don't do
  that for financial reasons, facing an effective backslash).

- *Get help*: Building a large scale cloud environment is a tricky and
  difficult task -- find the right partners in time and work together
  with them to turn the project into a guaranteed success.

// vim:set syntax=asciidoc:
